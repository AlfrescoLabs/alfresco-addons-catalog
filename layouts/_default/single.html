{{ define "main" }}
<article class="entry">
  <h1>{{ .Title }}</h1>

  {{ $vendor := .Params.vendor | default "Unknown" }}
  {{ $vslug  := $vendor | urlize }}
  {{ $vdata  := index site.Data.vendors $vslug }}
  {{ $vtype := lower (.Params.vendor_type | default "") }}
  {{ if not $vtype }}
    {{ if $vdata }}
      {{ if $vdata.type }}{{ $vtype = lower $vdata.type }}
      {{ else if $vdata.role }}{{ $vtype = lower $vdata.role }}
      {{ else if $vdata.kind }}{{ $vtype = lower $vdata.kind }}
      {{ else }}{{ $vtype = "community" }}{{ end }}
    {{ else }}{{ $vtype = "community" }}
    {{ end }}
  {{ end }}
  {{ $vurl := "" }}
  {{ if $vdata }}{{ with $vdata.website }}{{ $vurl = . }}{{ end }}{{ end }}

  <p class="vendor">
    by
    {{ if $vurl }}
      <a href="{{ $vurl }}" target="_blank" rel="noopener nofollow">{{ $vendor }}</a>
    {{ else }}
      {{ $vendor }}
    {{ end }}
  </p>

  <p class="badges">
    {{ if $vtype }}
      <span class="badge badge--contrib badge--{{ $vtype }}" title="{{ title $vtype }}">{{ title $vtype }}</span>
    {{ end }}
  </p>  
  
  {{ with .Params.description }}
      {{ . | markdownify }}
  {{ end }}

  {{ with .Params.screenshots }}
    <div class="shots">
      {{ range . }}
        {{ partial "media.html" . }}
      {{ end }}
    </div>
  {{ end }}

<div class="meta">

    {{ with .Params.download_url }}
      <p><strong>Download:</strong> <a href="{{ . }}" target="_blank" rel="noopener">{{ . }}</a></p>
    {{ end }}

    {{ with .Params.compatibility }}<p><strong>Compatibility:</strong> {{ delimit . ", " }}</p>{{ end }}
    {{ with .Params.license }}<p><strong>License:</strong> {{ . }}</p>{{ end }}
    {{ with .Params.keywords }}<p><strong>Keywords:</strong> {{ delimit . ", " }}</p>{{ end }}
    {{ with .Params.types }}<p><strong>Type:</strong> {{ delimit . ", " }}</p>{{ end }}

  </div>

  {{ with .Params.about }}
    <div class="about">
      <h3>About</h3>
      <p>
        {{ . | markdownify }}
      </p>
    </div>
  {{ end }}

  {{ $name := or .Params.name .Title }}
  <div class="catalog-entry-actions" style="display: flex; justify-content: flex-end; gap: 0.5rem; flex-wrap: wrap;">
    <a
      class="submit-link" target="_blank" rel="noopener"
      href="https://github.com/aborroy/alfresco-catalog/issues/new?template=update-entry.yml&labels=update-request&title={{ printf "Update Entry: %s" $name | urlquery }}&body={{ printf "Requested updates for **%s**:\n- " $name | urlquery }}">
      * Update Entry
    </a>

    <a
      class="submit-link" target="_blank" rel="noopener"
      href="https://github.com/aborroy/alfresco-catalog/issues/new?template=remove-entry.yml&labels=removal-request&title={{ printf "Remove Entry: %s" $name | urlquery }}&body={{ printf "Proposed removal of **%s**.\nReason:\n- " $name | urlquery }}">
      - Request Removal
    </a>
  </div>


</article>
{{ end }}