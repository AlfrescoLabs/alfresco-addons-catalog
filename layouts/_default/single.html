{{ define "main" }}
<article class="entry">
  <div>
    <h1>{{ .Title }}</h1>
  
    {{ $vendor := .Params.vendor | default "Unknown" }}
    {{ $vslug  := $vendor | urlize }}
    {{ $vdata  := index site.Data.vendors $vslug }}
    {{ $vtype := lower (.Params.vendor_type | default "") }}
    {{ if not $vtype }}
      {{ if $vdata }}
        {{ if $vdata.type }}{{ $vtype = lower $vdata.type }}
        {{ else if $vdata.role }}{{ $vtype = lower $vdata.role }}
        {{ else if $vdata.kind }}{{ $vtype = lower $vdata.kind }}
        {{ else }}{{ $vtype = "community" }}{{ end }}
      {{ else }}{{ $vtype = "community" }}
      {{ end }}
    {{ end }}
    {{ $vurl := "" }}
    {{ if $vdata }}{{ with $vdata.website }}{{ $vurl = . }}{{ end }}{{ end }}
  
    <p class="vendor">
      by
      {{ if $vurl }}
        <a href="{{ $vurl }}" target="_blank" rel="noopener nofollow">{{ $vendor }}</a>
      {{ else }}
        {{ $vendor }}
      {{ end }}
    </p>
  </div>

  <p class="badges">
    {{ if $vtype }}
      <span class="badge badge--contrib badge--{{ $vtype }}" title="{{ title $vtype }}">
        <svg class="badge-icon" aria-hidden="true" width="16" height="16">
          <use href="{{ "icons/icons-sprite.svg" | relURL }}#icon-{{ $vtype }}"></use>
        </svg>
        {{ title $vtype }}
      </span>
    {{ end }}
  </p>  
  
  <div class="description">
    <p>
      {{ with .Params.description }}
          {{ . | markdownify }}
      {{ end }}

      {{ with .Params.screenshots }}
        <div class="shots">
          {{ range . }}
            {{ partial "media.html" . }}
          {{ end }}
        </div>
      {{ end }}
    </p>
  </div>

  <div class="meta">
    <!-- Compatibility -->
    {{ with .Params.compatibility }}
    <p>
      <strong>
        <svg width="20" height="20" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="#334155"/></svg>
        Compatibility
      </strong>
      <span class="badge">{{ delimit . ", " }}</span>
    </p>
    {{ end }}

    <!-- License -->
    {{ with .Params.license }}
    <p>
      <strong>
        <svg width="20" height="20" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 3.75A.75.75 0 0 1 3.75 3h16.5a.75.75 0 0 1 0 1.5h-1.042l2.737 6.717A.75.75 0 0 1 22 11.5a3.5 3.5 0 1 1-7 0 .75.75 0 0 1 .055-.283L17.792 4.5H12.75v12h4a2.25 2.25 0 0 1 0 4.5H7.253a2.25 2.25 0 0 1 0-4.5h3.997v-12H6.208l2.737 6.717A.75.75 0 0 1 9 11.5a3.5 3.5 0 1 1-7 0 .75.75 0 0 1 .055-.283L4.792 4.5H3.75A.75.75 0 0 1 3 3.75Zm3.503 15c0 .414.336.75.75.75h9.497a.75.75 0 0 0 0-1.5H7.253a.75.75 0 0 0-.75.75Zm.852-6.5h-3.71a2 2 0 0 0 3.71 0Zm-.22-1.5L5.5 6.738 3.865 10.75h3.27ZM18.5 13.5a2 2 0 0 0 1.855-1.25h-3.71A2 2 0 0 0 18.5 13.5Zm-1.635-2.75h3.27L18.5 6.738l-1.635 4.012Z" fill="#334155"/></svg>
        License
      </strong>
      <span class="badge badge--muted">{{ . }}</span>
    </p>
    {{ end }}

    <!-- Keywords -->
    {{ with .Params.keywords }}
    <p>
      <strong><svg width="20" height="20" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.75 2A2.25 2.25 0 0 1 22 4.25v5.462a3.25 3.25 0 0 1-.952 2.298l-8.5 8.503a3.255 3.255 0 0 1-4.597.001L3.489 16.06a3.25 3.25 0 0 1-.003-4.596l8.5-8.51A3.25 3.25 0 0 1 14.284 2h5.465Zm0 1.5h-5.465c-.465 0-.91.185-1.239.513l-8.512 8.523a1.75 1.75 0 0 0 .015 2.462l4.461 4.454a1.755 1.755 0 0 0 2.477 0l8.5-8.503a1.75 1.75 0 0 0 .513-1.237V4.25a.75.75 0 0 0-.75-.75ZM17 5.502a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z" fill="#334155"/></svg>
      Keywords</strong>{{ delimit . ", " }}
    </p>
    {{ end }}

    <!-- Type -->
    {{ with .Params.types }}<p><strong>Type:</strong> {{ delimit . ", " }}</p>{{ end }}

    <!-- Download -->
    {{ with .Params.download_url }}
      <a class="btn-download" href="{{ . }}" target="_blank" rel="noopener">Download <svg width="20" height="20" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z"/></svg></a></p>
    {{ end }}
  </div>

  {{ with .Params.about }}
    <div class="about">
      <h3>About</h3>
      <p>
        {{ . | markdownify }}
      </p>
    </div>
  {{ end }}

  {{ $slug := or .Slug .File.BaseFileName (path.Base (strings.TrimSuffix "/" .RelPermalink)) }}
  {{ $name := or .Params.name .Title }}
  <div class="catalog-entry-actions">
    <a
      class="btn-update" target="_blank" rel="noopener"
      href="https://github.com/AlfrescoLabs/alfresco-addons-catalog/issues/new?template=update-entry.yml&labels=update-request&title={{ printf "Update Entry: %s (%s)" $name $slug | urlquery }}&entry_name={{ $name | urlquery }}">
      <svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m7.47 12.281.084.073a.75.75 0 0 0 .977-.073l2.72-2.72v6.69l.006.102a.75.75 0 0 0 .743.648l.102-.006a.75.75 0 0 0 .648-.744V9.56l2.72 2.722.085.072a.75.75 0 0 0 .977-1.133l-4-4.001-.085-.073a.75.75 0 0 0-.976.073l-4.001 4-.073.085a.75.75 0 0 0 .073.976Z" /><path d="M22 12.001c0-5.523-4.476-10-10-10-5.522 0-10 4.477-10 10s4.478 10 10 10c5.524 0 10-4.477 10-10Zm-18.5 0a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg> Update Entry
    </a>

    <a
      class="btn-delete" target="_blank" rel="noopener"
      href="https://github.com/AlfrescoLabs/alfresco-addons-catalog/issues/new?template=remove-entry.yml&labels=removal-request&title={{ printf "Remove Entry: %s (%s)" $name $slug | urlquery }}&entry_name={{ $name | urlquery }}">
      <svg width="20" height="20" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z"/></svg> Request Removal
    </a>
  </div>

</article>
{{ end }}