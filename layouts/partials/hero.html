{{/* Simple top-of-page description. Driven by site params. */}}
{{ $title := site.Params.introTitle | default "Alfresco Catalog" }}
{{ $lead  := site.Params.introLead | default "A community-driven index of third-party solutions for Alfresco." }}
{{ $hideable := site.Params.introHideable | default true }}

<section id="catalog-hero" class="container catalog-hero">
  <div class="hero"
       style="border:1px solid #e5e7eb;border-radius:12px;padding:16px 18px;background:#fafafa;">
    <div style="display:flex;align-items:flex-start;gap:12px;">
      <div aria-hidden="true" style="font-size:20px;line-height:1.2;">ðŸ›Ÿ</div>
      <div style="flex:1;">
        <h1 style="margin:0 0 .35rem 0;font-size:1.1rem;line-height:1.2;">{{ $title }}</h1>
        <p style="margin:0;color:#374151;font-size:.95rem;line-height:1.45;">
          {{ $lead | safeHTML }}
        </p>
      </div>
      {{ if $hideable }}
      <button id="catalog-hero-close"
              aria-label="Hide introduction"
              style="border:none;background:transparent;font-size:18px;cursor:pointer;line-height:1;">
        âœ•
      </button>
      {{ end }}
    </div>
  </div>
</section>

<script>
(function () {
  var key    = "alfresco-catalog.hideHero";

  function init() {
    var hero   = document.getElementById("catalog-hero");
    var close  = document.getElementById("catalog-hero-close");
    var toggle = document.getElementById("catalog-hero-toggle");

    function showToggle() {
      if (toggle) toggle.classList.add("is-visible");
    }
    function hideToggle() {
      if (toggle) toggle.classList.remove("is-visible");
    }

    function hideHero() {
      if (hero) hero.style.display = "none";
      showToggle();
      localStorage.setItem(key, "1");
    }
    function showHero() {
      if (hero) hero.style.display = "block";
      hideToggle();
      localStorage.removeItem(key);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // Initial state
    if (localStorage.getItem(key) === "1") {
      if (hero) hero.style.display = "none";
      showToggle();
    } else {
      if (hero) hero.style.display = "block";
      hideToggle();
    }

    if (close) close.addEventListener("click", hideHero);
    if (toggle) toggle.addEventListener("click", function (e) {
      if (e.target.tagName === "A") {
        e.preventDefault();
        showHero();
      }
    });
  }

  document.readyState === "loading"
    ? document.addEventListener("DOMContentLoaded", init)
    : init();
})();
</script>

